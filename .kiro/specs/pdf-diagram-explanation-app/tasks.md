# 実装タスク: PDF図表抽出・説明アプリ

## フェーズ1: フロントエンド開発

- [x] **タスク1.1**: Next.jsプロジェクトのセットアップ
  - `create-next-app`を使用して、TypeScriptとTailwind CSSを有効にしたプロジェクトを作成する。
- [x] **タスク1.2**: PDFアップロードフォームコンポーネント (`PdfUploadForm.tsx`) の作成
  - ファイル選択ボタンとドラッグ＆ドロップエリアを実装する。
  - `react-dropzone`ライブラリを導入する。
- [x] **タスク1.3**: 抽出図表一覧コンポーネント (`DiagramList.tsx`) の作成
  - 抽出された図表のサムネイルをグリッドレイアウトで表示する。
  - 各サムネイルにはページ番号を表示し、クリックイベントをハンドリングできるようにする。
- [x] **タスク1.4**: 図表表示コンポーネント (`DiagramViewer.tsx`) の作成
  - 選択された図表の画像と、AIによる説明テキストを表示するエリアを設ける。
- [x] **タスク1.5**: ローディングスピナーコンポーネント (`LoadingSpinner.tsx`) の作成
  - APIからのレスポンスを待つ間に表示するスピナーを実装する。
- [x] **タスク1.6**: メインページのレイアウト作成
  - 上記コンポーネントを組み合わせて、メインページ (`app/page.tsx`) の全体的なレイアウトを構築する。
- [x] **タスク1.7**: 状態管理ロジックの実装
  - `useState`と`useContext`（またはZustandなどの状態管理ライブラリ）を用いて、アプリケーションの状態を管理するロジックを実装する。

## フェーズ2: バックエンド開発 (API Routes)

- [x] **タスク2.1**: API Route (`/api/extract`) の雛形作成
  - `app/api/extract/route.ts`ファイルを作成し、POSTリクエストを処理する基本的な構造を実装する。
- [x] **タスク2.2**: PDF解析ライブラリの導入と実装
  - `pdf2json`または類似のライブラリを導入し、アップロードされたPDFから画像やテキストを抽出する処理を実装する。
- [x] **タスク2.3**: 図表抽出ロジックの実装 (現時点ではダミーデータを使用)
  - PDFの解析結果から、画像やテーブルに該当する部分を特定し、個別のデータとして取り出すロジックを実装する。
- [x] **タスク2.4**: AIモデル連携の実装
  - `@google/generative-ai`ライブラリを導入する。
  - 抽出した図表データをGemini Pro Visionモデルに送信し、説明文を生成させる処理を実装する。
- [x] **タスク2.5**: APIレスポンスの設計と実装
  - 抽出した図表のリスト（画像URLやBase64文字列）と、それぞれに対応する説明文をJSON形式でフロントエンドに返す処理を実装する。

## フェーズ3: 統合とテスト

- [x] **タスク3.1**: フロントエンドとバックエンドの統合
  - フロントエンドから`/api/extract`を呼び出し、レスポンスを正しく受け取って画面に表示するまでの一連の流れを実装・テストする。
- [x] **タスク3.2**: エラーハンドリングの実装
  - ファイルアップロードの失敗、PDF解析エラー、AI APIのエラーなど、想定されるエラーケースに対応する処理を実装する。
- [x] **タスク3.3**: 単体テストの作成
  - 各コンポーネントやAPIのロジックに対して、`jest`と`@testing-library/react`を用いた単体テストを作成する。
- [x] **タスク3.4**: E2Eテストの作成
  - `Cypress`や`Playwright`を用いて、ユーザーの一連の操作（PDFアップロード→結果表示）をシミュレートするE2Eテストを作成する。

## フェーズ4: デプロイ

- [x] **タスク4.1**: Vercelへのデプロイ設定
  - Vercelプロジェクトを作成し、GitHubリポジトリと連携する。
- [x] **タスク4.2**: 環境変数の設定
  - AIモデルのAPIキーなどの機密情報をVercelの環境変数に設定する。
- [x] **タスク4.3**: デプロイと動作確認
  - Vercelにデプロイし、本番環境でアプリケーションが正常に動作することを確認する。
